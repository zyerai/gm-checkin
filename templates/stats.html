{% extends "base.html" %}

{% block title %}ç»Ÿè®¡ - GMæ‰“å¡æ—¥å¿—{% endblock %}

{% block content %}
<div class="stats-page">
    <h1>ğŸ“Š æ‰“å¡ç»Ÿè®¡</h1>

    <div class="stats-grid">
        <div class="stat-card blue">
            <div class="stat-icon">âœ…</div>
            <div class="stat-content">
                <div class="stat-label">æ€»æ‰“å¡å¤©æ•°</div>
                <div class="stat-value">{{ total_checkins }}</div>
            </div>
        </div>

        <div class="stat-card orange">
            <div class="stat-icon">ğŸ”¥</div>
            <div class="stat-content">
                <div class="stat-label">å½“å‰è¿ç»­</div>
                <div class="stat-value">{{ streak }} å¤©</div>
            </div>
        </div>

        <div class="stat-card purple">
            <div class="stat-icon">ğŸ†</div>
            <div class="stat-content">
                <div class="stat-label">æœ€é•¿è¿ç»­</div>
                <div class="stat-value">{{ max_streak }} å¤©</div>
            </div>
        </div>

        <div class="stat-card green">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-content">
                <div class="stat-label">è¿‘30å¤©æ‰“å¡ç‡</div>
                <div class="stat-value">{{ "%.1f"|format(checkin_rate) }}%</div>
            </div>
        </div>
    </div>

    <div class="stats-section">
        <h2>æœ¬æœˆæ‰“å¡</h2>
        <div class="month-stat">
            <span class="month-stat-value">{{ this_month }}</span>
            <span class="month-stat-label">å¤©</span>
        </div>
    </div>

    <div class="stats-section">
        <h2>å¿ƒæƒ…åˆ†å¸ƒ</h2>
        {% if by_mood|length == 0 %}
        <p class="empty-text">è¿˜æ²¡æœ‰æ‰“å¡è®°å½•</p>
        {% else %}
        <div class="mood-stats">
            {% for mood in by_mood %}
            <div class="mood-stat-item">
                <span class="mood-emoji">{{ mood.mood|mood_emoji }}</span>
                <span class="mood-name">{{ mood.mood|capitalize }}</span>
                <span class="mood-count">{{ mood.count }} æ¬¡</span>
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="stats-section">
        <h2>åšæŒå°±æ˜¯èƒœåˆ© ğŸ’ª</h2>
        <div class="motivation">
            {% if streak >= 30 %}
            <p>ğŸ‰ å¤ªæ£’äº†ï¼ä½ å·²ç»è¿ç»­æ‰“å¡ {{ streak }} å¤©äº†ï¼</p>
            {% elif streak >= 21 %}
            <p>ğŸ”¥ ä¹ æƒ¯å·²ç»å…»æˆï¼ç»§ç»­åšæŒï¼</p>
            {% elif streak >= 7 %}
            <p>ğŸ’ª å¾ˆå¥½çš„å¼€å§‹ï¼ä¿æŒè¿™ä¸ªèŠ‚å¥ï¼</p>
            {% elif streak >= 3 %}
            <p>âœ… å¥½çš„å¼€å§‹ï¼ç»§ç»­åŠ æ²¹ï¼</p>
            {% else %}
            <p>ğŸŒ… æ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹ï¼ŒGMï¼</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
